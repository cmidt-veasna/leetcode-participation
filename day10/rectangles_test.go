package day10

import (
	"testing"

	"github.com/stretchr/testify/require"
)

type rectanglesCase struct {
	rectangles [][]int
	points     [][]int
	out        []int
}

var rectanglesCases = []*rectanglesCase{
	{
		[][]int{{1, 2}, {2, 3}, {2, 5}},
		[][]int{{2, 1}, {1, 4}},
		[]int{2, 1},
	},
	{
		[][]int{{1, 1}, {2, 2}, {3, 3}},
		[][]int{{1, 3}, {1, 1}},
		[]int{1, 3},
	},
	{
		[][]int{{4, 7}, {4, 9}, {8, 5}, {6, 2}, {6, 4}},
		[][]int{{4, 2}, {5, 6}},
		[]int{5, 0},
	},
	{
		[][]int{{7, 1}, {2, 6}, {1, 4}, {5, 2}, {10, 3}, {2, 4}, {5, 9}},
		[][]int{{10, 3}, {8, 10}, {2, 3}, {5, 4}, {8, 5}, {7, 10}, {6, 6}, {3, 6}},
		[]int{1, 0, 4, 1, 0, 0, 0, 1},
	},
	{
		[][]int{{81, 69}, {85, 18}, {4, 89}, {2, 23}, {29, 25}, {19, 98}, {77, 74}, {100, 98}, {61, 5}, {11, 57}, {23, 4}, {2, 55}, {8, 77}, {23, 79}, {4, 69}, {4, 33}, {44, 69}, {93, 47}, {77, 4}, {44, 91}, {11, 54}, {35, 67}, {59, 90}, {34, 59}, {16, 25}, {93, 6}, {37, 14}, {88, 51}, {13, 69}, {16, 26}, {77, 7}, {6, 63}, {3, 41}, {90, 89}, {97, 35}, {75, 49}, {96, 94}, {80, 16}, {96, 59}},
		[][]int{{26, 16}, {58, 70}, {64, 58}, {52, 2}, {85, 98}, {75, 93}, {12, 3}, {2, 25}, {79, 90}, {36, 35}, {45, 40}, {12, 34}, {2, 71}, {63, 88}, {74, 91}, {78, 90}, {73, 19}, {95, 92}, {43, 7}, {9, 28}},
		[]int{18, 5, 6, 17, 1, 2, 29, 30, 2, 13, 10, 18, 10, 3, 2, 2, 10, 2, 16, 20},
	},
}

func TestCountRectangles(t *testing.T) {
	for i, tc := range rectanglesCases {
		t.Logf("TestCountRectangles case #%d", i+1)
		result := countRectangles(tc.rectangles, tc.points)
		require.Equal(t, tc.out, result)
	}
}
